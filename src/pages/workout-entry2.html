<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>운동일지 작성2 - 이윤창 트레이너의 PT Manager</title>
    <link rel="stylesheet" href="../css/design-system.css">
    <script src="../js/dark-mode.js"></script>
    <script src="../../config/config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        .entry-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .entry-section {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-light);
        }

        .section-title {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-title svg {
            width: 24px;
            height: 24px;
            stroke: var(--primary);
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
            font-size: var(--font-size-sm);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            font-size: var(--font-size-base);
            background: var(--bg-white);
            color: var(--text-primary);
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            transition: all 0.2s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .exercise-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
            font-size: var(--font-size-sm);
        }

        .exercise-table th,
        .exercise-table td {
            padding: 0.75rem 0.5rem;
            border: 1px solid var(--border-light);
            text-align: left;
        }

        .exercise-table th {
            background: var(--bg-gray);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            font-size: var(--font-size-xs);
        }

        .exercise-table input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-sm);
            background: var(--bg-white);
            color: var(--text-primary);
        }

        .exercise-table input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .exercise-table input.small-input {
            text-align: center;
        }

        .add-row-btn,
        .remove-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
            transition: all 0.2s;
        }

        .add-row-btn {
            background: var(--primary);
            color: white;
            width: 100%;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .add-row-btn:hover {
            background: var(--primary-dark);
        }

        .add-row-btn svg {
            width: 18px;
            height: 18px;
            stroke: white;
        }

        .remove-btn {
            background: #dc3545;
            color: white;
            padding: 0.4rem 0.8rem;
            font-size: var(--font-size-xs);
        }

        .remove-btn:hover {
            background: #c82333;
        }

        .reference-list {
            margin-top: 1rem;
        }

        .reference-item {
            display: grid;
            grid-template-columns: 1fr 2fr auto;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            align-items: start;
        }

        .reference-item input {
            padding: 0.5rem;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-sm);
            background: var(--bg-white);
            color: var(--text-primary);
        }

        .reference-item input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .add-reference-btn {
            background: #10b981;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
            width: 100%;
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .add-reference-btn:hover {
            background: #059669;
        }

        .add-reference-btn svg {
            width: 16px;
            height: 16px;
            stroke: white;
        }

        .kakao-text-area {
            width: 100%;
            min-height: 400px;
            padding: 1rem;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            font-size: var(--font-size-sm);
            background: var(--bg-white);
            color: var(--text-primary);
            resize: vertical;
            line-height: 1.6;
        }

        .copy-btn {
            background: #FEE500;
            color: #3c1e1e;
            padding: 0.875rem 1.5rem;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-semibold);
            width: 100%;
            margin-top: 1rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .copy-btn:hover {
            background: #fdd835;
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .copy-btn svg {
            width: 20px;
            height: 20px;
            stroke: #3c1e1e;
        }

        .save-btn {
            background: var(--primary);
            color: white;
            padding: 0.875rem 1.5rem;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-semibold);
            width: 100%;
            margin-top: 0.75rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .save-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(99, 102, 241, 0.3);
        }

        .save-btn svg {
            width: 20px;
            height: 20px;
            stroke: white;
        }

        .subsection-title {
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-semibold);
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
        }

        @media (max-width: 1024px) {
            .entry-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Dark Mode Toggle -->
    <button class="dark-mode-toggle" id="darkModeToggle" aria-label="다크모드 전환">
        <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
    </button>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                        <path d="M2 17l10 5 10-5M2 12l10 5 10-5"></path>
                    </svg>
                </div>
                <div class="sidebar-title">
                  <div class="sidebar-title-main">PT Manager</div>
                  <div class="sidebar-title-sub">이윤창 트레이너의</div>
                  <div class="sidebar-title-sub">맞춤형 회원 관리 시스템</div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <a href="dashboard.html" class="nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    대시보드
                </a>
                <a href="main.html" class="nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    트레이너 소개
                </a>
                <a href="members.html" class="nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87m-4-12a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    회원 관리
                </a>
                <a href="members2.html" class="nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="10" width="18" height="12" rx="2"></rect>
                        <path d="M7 10V6a5 5 0 0 1 10 0v4"></path>
                        <line x1="9" y1="16" x2="9" y2="16"></line>
                        <line x1="15" y1="16" x2="15" y2="16"></line>
                    </svg>
                    회원 관리2
                </a>
                <a href="workout-entry.html" class="nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                        <path d="M2 17l10 5 10-5M2 12l10 5 10-5"></path>
                    </svg>
                    운동일지 작성
                </a>
                <a href="workout-entry2.html" class="nav-item active">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    운동일지 작성2
                </a>
                <a href="workout-history.html" class="nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    운동일지 조회
                </a>
                <a href="ai-consultation.html" class="nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                    AI 상담
                </a>
            </nav>

            <div class="sidebar-footer">
              © 2025 이윤창 트레이너의 PT Manager
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- Page Header -->
                <div class="page-header">
                    <h1 class="page-title">운동일지 작성2</h1>
                    <p class="page-description">운동 내역을 표에 입력하고 카카오톡 전송용 텍스트를 생성하세요</p>
                </div>

                <!-- Entry Container -->
                <div class="entry-container">
                    <!-- 왼쪽: 입력 영역 -->
                    <div class="entry-section">
                        <h3 class="section-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                            </svg>
                            운동일지 입력
                        </h3>

                        <div class="form-group">
                            <label>회원 선택</label>
                            <select id="memberSelect">
                                <option value="">회원을 선택하세요</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>운동 날짜</label>
                            <input type="date" id="workoutDate">
                        </div>

                        <div class="form-group">
                            <label>컨디션 체크</label>
                            <textarea id="statusCheck" placeholder="오늘 회원의 컨디션, 몸 상태 등을 기록하세요"></textarea>
                        </div>

                        <h4 class="subsection-title">운동 내역</h4>

                        <table class="exercise-table" id="exerciseTable">
                            <thead>
                                <tr>
                                    <th style="width: 25%;">운동명</th>
                                    <th style="width: 35%;">세트 (무게 x 횟수)</th>
                                    <th style="width: 10%;">세트수</th>
                                    <th style="width: 20%;">특이사항</th>
                                    <th style="width: 10%;"></th>
                                </tr>
                            </thead>
                            <tbody id="exerciseTableBody">
                                <tr>
                                    <td><input type="text" placeholder="숄더 프레스" class="exercise-name"></td>
                                    <td><input type="text" placeholder="15kg x 12, 20kg x 10" class="exercise-sets"></td>
                                    <td><input type="text" placeholder="3" class="small-input exercise-count"></td>
                                    <td><input type="text" placeholder="폼 개선" class="exercise-note"></td>
                                    <td><button class="remove-btn" onclick="removeExerciseRow(this)">삭제</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="add-row-btn" onclick="addExerciseRow()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            운동 추가
                        </button>

                        <div class="form-group">
                            <label>코멘트</label>
                            <textarea id="comment" placeholder="전체적인 운동 코멘트를 작성하세요"></textarea>
                        </div>

                        <h4 class="subsection-title">참고 자료 (선택사항)</h4>
                        <div class="reference-list" id="referenceList">
                            <div class="reference-item">
                                <input type="text" placeholder="제목" class="reference-title">
                                <input type="text" placeholder="URL" class="reference-url">
                                <button class="remove-btn" onclick="removeReferenceRow(this)">삭제</button>
                            </div>
                        </div>
                        <button class="add-reference-btn" onclick="addReferenceRow()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                            </svg>
                            참고자료 추가
                        </button>
                    </div>

                    <!-- 오른쪽: 미리보기 및 카톡 전송 영역 -->
                    <div class="entry-section">
                        <h3 class="section-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10 9 9 9 8 9"></polyline>
                            </svg>
                            카카오톡 전송용 텍스트
                        </h3>

                        <textarea id="kakaoTextArea" class="kakao-text-area" readonly></textarea>

                        <button class="copy-btn" onclick="copyToClipboard()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            카카오톡용 텍스트 복사
                        </button>

                        <button class="save-btn" onclick="saveWorkoutLog()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                                <polyline points="17 21 17 13 7 13 7 21"></polyline>
                                <polyline points="7 3 7 8 15 8"></polyline>
                            </svg>
                            운동일지 저장
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../js/workout-entry2.js"></script>
</body>
</html>
